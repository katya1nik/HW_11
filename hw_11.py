"""
–ó–∞–¥–∞–Ω–∏–µ üìÉ
**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –≥–æ—Ä–æ–¥–∞—Ö –†–æ—Å—Å–∏–∏**

## –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ 
–í –¥–∞–Ω–Ω–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –¥–∞—Ç–∞–∫–ª–∞—Å—Å `City` –∏ –∫–ª–∞—Å—Å-–∏—Ç–µ—Ä–∞—Ç–æ—Ä `CitiesIterator`. –ò—Ç–µ—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≥–æ—Ä–æ–¥–∞—Ö, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Å–ª–æ–≤–∞—Ä—å –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä `City` (—Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è `coords` –¥–ª—è –ø–æ–ª–µ–π `lat` –∏ `lon`), –∞ —Ç–∞–∫–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—é –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: ü¶æ
- Python 3.x
- –ú–æ–¥—É–ª—å dataclasses (`@dataclass`)
- –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –û—Å–Ω–æ–≤—ã –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

## –ó–∞–¥–∞–Ω–∏–µ üë∑‚Äç‚ôÇÔ∏è

### –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ –¥–∞—Ç–∞–∫–ª–∞—Å—Å `City` —Å –ø–æ–ª—è–º–∏:
   - `name` (–Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞)
   - `lat` (—à–∏—Ä–æ—Ç–∞)
   - `lon` (–¥–æ–ª–≥–æ—Ç–∞)
   - `district` (—Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥)
   - `population` (–Ω–∞—Å–µ–ª–µ–Ω–∏–µ)
   - `subject` (—Å—É–±—ä–µ–∫—Ç –†–§)

"""
from dataclasses import dataclass
import json

@dataclass
class City:
   """
    –î–∞—Ç–∞–∫–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≥–æ—Ä–æ–¥–µ.
    
    –ê—Ç—Ä–∏–±—É—Ç—ã:
        name (str): –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
        lat (float): –®–∏—Ä–æ—Ç–∞
        lon (float): –î–æ–ª–≥–æ—Ç–∞
        district (str): –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥
        population (int): –ù–∞—Å–µ–ª–µ–Ω–∏–µ
        subject (str): –°—É–±—ä–µ–∫—Ç –†–§
    """ 
   name: str = None
   lat: float = None
   lon: float = None
   district: str = None
   population: int = None
   subject: str = None


"""
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å-–∏—Ç–µ—Ä–∞—Ç–æ—Ä `CitiesIterator` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:
   - **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≥–æ—Ä–æ–¥–∞—Ö. –ö–∞–∂–¥—ã–π —Å–ª–æ–≤–∞—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: `name`, `district`, `population`, `subject` –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å `coords` —Å –ø–æ–ª—è–º–∏ `lat` –∏ `lon`.
   - **–ò—Ç–µ—Ä–∞—Ü–∏—è:** –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –∫–∞–∂–¥—ã–π —Å–ª–æ–≤–∞—Ä—å –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä `City`. –ü—Ä–∏ —ç—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è `lat` –∏ `lon` –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è `coords`.
   - **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** –Ω–∞ —ç—Ç–∞–ø–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Å–ª–æ–≤–∞—Ä–µ. –ï—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –≤—ã–±—Ä–æ—Å–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
   - **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—é:** –¥–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ `set_population_filter(min_population: int)` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –Ω–∞—Å–µ–ª–µ–Ω–∏—è. –ò—Ç–µ—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –≥–æ—Ä–æ–¥–∞, —É –∫–æ—Ç–æ—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–µ `population` –Ω–µ –º–µ–Ω—å—à–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ.
   - **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ—Ç–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sort_by(parameter: str, reverse: bool = False)`) –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞—ë—Ç –∫—Ä–∏—Ç–µ—Ä–∏–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.

>[!info]
>#### –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
>- –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—Ç–∞–∫–ª–∞—Å—Å–∞ `City` —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏.
>- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–ª–∞—Å—Å–∞ `CitiesIterator`, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–≥–æ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π.
>- –ü—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–ª—é—á–µ–π, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ –ø–æ–ª—è `coords` –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `City`.
>- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `set_population_filter` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—é.
>- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É.

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –≤–∞—Å –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤:
```python
cities_list = [
    {
        "coords": {
            "lat": "52.65",
            "lon": "90.08333"
        },
        "district": "–°–∏–±–∏—Ä—Å–∫–∏–π",
        "name": "–ê–±–∞–∑–∞",
        "population": 14816,
        "subject": "–•–∞–∫–∞—Å–∏—è"
    },
    # –î—Ä—É–≥–∏–µ –∑–∞–ø–∏—Å–∏ ...
]
```
–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–º:
```python
cities_iterator = CitiesIterator(cities_list)
cities_iterator.set_population_filter(15000)  # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –Ω–∞—Å–µ–ª–µ–Ω–∏—é 15000
cities_iterator.sort_by("name")               # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞
for city in cities_iterator:
    print(city)
```
–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –≥–æ—Ä–æ–¥–∞ —Å –Ω–∞—Å–µ–ª–µ–Ω–∏–µ–º –Ω–µ –º–µ–Ω—å—à–µ 15000 –±—É–¥—É—Ç –≤—ã–≤–µ–¥–µ–Ω—ã, –∞ –ø–æ—Ä—è–¥–æ–∫ –±—É–¥–µ—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é.

>[!warning]
>#### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã ‚ö†Ô∏è
>- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª–µ–π: `name`, `district`, `population`, `subject` –∏ `coords` (–≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `lat` –∏ `lon`).
>- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è –≤—ã–±—Ä–∞—Å—ã–≤–∞–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
>- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞, –Ω–µ –Ω–∞—Ä—É—à–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `__iter__()`.

### –¢–∞–±–ª–∏—Ü–∞ –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤

| –ö–ª–∞—Å—Å             | –§–∞–π–ª        | –ú–µ—Ç–æ–¥—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏                                 | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                     | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ                                   |
| ----------------- | ----------- | ------------------------------------------------ | -------------------------------------------------------------------------------------------- | ----------------------------------------------- |
| `City`            | `iterator.py` | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `name`, `lat`, `lon`, `district`, `population`, `subject`  | –î–∞—Ç–∞–∫–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –æ –≥–æ—Ä–æ–¥–µ —Å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.                      | –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≥–æ—Ä–æ–¥–∞                     |
| `CitiesIterator`  | `iterator.py` | `__init__(cities: list[dict])`                   | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ —Å–ø–∏—Å–∫–æ–º —Å–ª–æ–≤–∞—Ä–µ–π, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–æ–≤.                          | –ü—Ä–∏–µ–º –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö                           |
|                   |             | `__iter__()`                                   | –ù–∞—á–∞–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–∏; –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.                  | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞                  |
|                   |             | `__next__()`                                   | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä `City`, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–π –∏–∑ —Å–ª–æ–≤–∞—Ä—è –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å. | –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º                             |
|                   |             | `set_population_filter(min_population: int)`   | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Å–µ–ª–µ–Ω–∏—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–æ–≤.                         | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—é                         |
|                   |             | `sort_by(parameter: str, reverse: bool = False)` | –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—è.                              | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É              |

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–∫–∞–∑–∞–Ω–∏—è

1. **–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –í–æ –≤—Å–µ—Ö –∫–ª–∞—Å—Å–∞—Ö –∏ –º–µ—Ç–æ–¥–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
   - –ö–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (docstring). –û–ø–∏—à–∏—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞, –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - –ü—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ —Å–ª–æ–≤–∞—Ä—è –≤ –æ–±—ä–µ–∫—Ç `City` –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç.
   - –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è ‚Äì –≤—ã–±—Ä–∞—Å—ã–≤–∞–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–µ.
   
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞:**
   - –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
   - –û–±–µ—Å–ø–µ—á—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ–±—Ö–æ–¥–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `__iter__()` —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é).

>[!warning]
>#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ üëå
>- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞—Ç–∞–∫–ª–∞—Å—Å–∞ `City` —Å —Ç—Ä–µ–±—É–µ–º—ã–º–∏ –ø–æ–ª—è–º–∏.
>- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∏ –º–µ—Ç–æ–¥–æ–≤ `__iter__()` –∏ `__next__()` –≤ –∫–ª–∞—Å—Å–µ `CitiesIterator`.
>- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö: –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏.
>- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ `set_population_filter` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—é.
>- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `sort_by`.
>- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É PEP-8 –∏ –≤–∫–ª—é—á–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –∏ docstring.
>- –ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.
"""

class CitiesIterator:
   """
    –ò—Ç–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤.
    
    –ú–µ—Ç–æ–¥—ã:
        set_population_filter: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Å–µ–ª–µ–Ω–∏—è
        sort_by: –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –≥–æ—Ä–æ–¥–∞ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É
    """
   def __init__(self, cities: list[dict]):
        self.cities = cities
        self.index = 0
        self.filtered_cities = self._validate_and_convert_cities()

   def _validate_and_convert_cities(self) -> list[City]:
      result = []
      for city_data in self.cities:
         if not all(key in city_data for key in ['name', 'district', 'population', 'subject', 'coords']):
            raise KeyError ('–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞')
         
         if not all(key in city_data['coords'] for key in ['lat', 'lon']):
            raise KeyError ('–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞')

         city = City(
            name=city_data['name'],
            lat=float(city_data['coords']['lat']),
            lon=float(city_data['coords']['lon']),
            district=city_data['district'],
            population=city_data['population'],
            subject=city_data['subject']
         )
         result.append(city)
      return result

   def __iter__(self):
      self.index = 0
      return self

   def __next__(self):
      if self.index >= len(self.filtered_cities):
         raise StopIteration
      city = self.filtered_cities[self.index]
      self.index += 1
      return city

   def set_population_filter(self, min_population: int):
      self.filtered_cities = [city for city in self.filtered_cities if city.population >= min_population]
      return self

   def sort_by(self, parameter: str, reverse: bool = False):
      if not hasattr(City, parameter):
         raise ValueError(f"–ü–∞—Ä–∞–º–µ—Ç—Ä {parameter} –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–ª–∞—Å—Å–µ City")
      self.filtered_cities.sort(key=lambda x: getattr(x, parameter), reverse=reverse)
      return self

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
# cities_list = [
#     {
#         "coords": {
#             "lat": "52.65",
#             "lon": "90.08333"
#         },
#         "district": "–°–∏–±–∏—Ä—Å–∫–∏–π",
#         "name": "–ê–±–∞–∑–∞",
#         "population": 14816,
#         "subject": "–•–∞–∫–∞—Å–∏—è"
#     },
#     {
#         "coords": {
#             "lat": "55.65",
#             "lon": "37.08333"
#         },
#         "district": "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π",
#         "name": "–ú–æ—Å–∫–≤–∞",
#         "population": 12000000,
#         "subject": "–ú–æ—Å–∫–≤–∞"
#     }
# ]

with open('cities.json', 'r', encoding='utf-8') as file:
    cities_list = json.load(file)

iterator = CitiesIterator(cities_list)
iterator.set_population_filter(1_500_000)
iterator.sort_by('name')

for city in iterator:
    print(f'{city.name}: –Ω–∞—Å–µ–ª–µ–Ω–∏–µ {city.population}')
   
